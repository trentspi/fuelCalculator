<!DOCTYPE HTML>
<html lang="en">
<head>
  <title><i class="material-icons">home</i>Fuel Calculator</title>
  <meta charset="UTF-8">
  <link href="static/w3.css" rel="stylesheet" type="text/css"/>
  <link href="static/main.css" rel="stylesheet" type="text/css"/>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
</head>

<body>
<ul class = "w3-bottombar w3-border-light-green w3-navbar w3-green w3-top">
<li class = "w3-hide-small w3-padding-large">Fuel Calculator</li>
</ul>
<br />
<br />
<div class = "w3-card-4 w3-margin container movedown">
<div class="w3-container">
Enter date when gas was filled: <input class = "w3-input" type="text" id = "date" name="date" placeholder = "mm/dd/yyyy">

Total price spend on gas: ($ USD) <input class="w3-input" type="text" id = "price" name="price">

Gallons of gas filled during fueling: (G) <input class="w3-input" type="text" id = "gallons" name="gallons">

Odometer reading when the car was previously fueled? (Miles) <input class="w3-input" type="text" id = "distbefore" name="distbefore">

Odometer reading when the car was recently fueled? (Miles)<input class="w3-input" type="text" id = "distafter" name="distafter">
<br />
<button class="w3-btn-block w3-round-xxlarge w3-green container">Calculate MPG!</button>
</div>

<br />
</div>
<div class = "w3-card-4 w3-margin container">
<table id = "tab" class="w3-table-all w3-striped w3-bordered">
  <div class = "w3-bottombar w3-border-light-green w3-container w3-green">
  <h6>Calculated Entries</h6>
  </div>
  <tr>
    <th>Date</th>
    <th>MPG</th>
    <th>Miles</th>
    <th>Gallons</th>
    <th>Total Spent</th>
    <th>Price of Gas</th>
  </tr>

</table>
</div>

<script>
  $("button").click(function() {
      var formdata = {
          distbefore : document.getElementById('distbefore').value,
          distafter : document.getElementById('distafter').value,
          date : document.getElementById('date').value,
          price : document.getElementById('price').value,
          gallons : document.getElementById('gallons').value
        };
  $.ajax({
    type: 'POST',
    url: '/',
    data: formdata,
    dataType: 'JSON',
    complete: function(response, status){
      var table = document.getElementById('tab');
      var data = response.responseJSON;
      var row = document.createElement('tr');
      var td0 = document.createElement('td');
      var td1 = document.createElement('td');
      var td2 = document.createElement('td');
      var td3 = document.createElement('td');
      var td4 = document.createElement('td');
      var td5 = document.createElement('td');

      td0.innerHTML = data['date'];
      td1.innerHTML = data['mpg'];
      td2.innerHTML = data['miles'];
      td3.innerHTML = data['gallonsgas'];
      td4.innerHTML = data['pricegas'];
      td5.innerHTML = data['pricepg'];

      row.style.display = 'none';
      row.appendChild(td0);
      row.appendChild(td1);
      row.appendChild(td2);
      row.appendChild(td3);
      row.appendChild(td4);
      row.appendChild(td5);

      row = table.appendChild(row);
      $(row).fadeIn(250);

    }
  });
  document.getElementById('distbefore').value = '';
  document.getElementById('distafter').value = '';
  document.getElementById('date').value = '';
  document.getElementById('price').value = '';
  document.getElementById('gallons').value = '';
});
</script>
</body>
</html>
